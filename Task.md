# Terraform LogViewer: от хаоса к порядку
При масштабных развертывании инфраструктуры Terraform-логи растут до десятков мегабайт и содержат разнородные по формату записи: сообщения от планирования (plan) и применения (apply), журналы HTTP-запросов к провайдерам, предупреждения и ошибки. Отсутствие единого интерфейса для быстрого обнаружения аномалий, трассировки выполнения запросов и детального анализа JSON body усложняет работу техподдержки: приходится вручную сканировать огромные текстовые файлы либо писать ad-hoc скрипты, что увеличивает время диагностики и приводит к задержкам при восстановлении сервисов.

Участники создают веб-сервис, который принимает на вход файлы логов Terraform в JSON формате.

### Парсинг и хранение
- Выделение временных меток и уровней логирования, даже если строка не содержит явно timestamp или log level (алгоритм эвристической разбивки и регулярок)
- Распознавание секций вывода terraform plan и terraform apply с маркировкой их начала и конца
- Извлечение JSON-блоков из полей tf_http_req_body и tf_http_res_body с возможностью ленивой загрузки (JSON-боди по умолчанию скрыты, можно кликнуть для полного или селективного разворачивания)

### Интерфейс и визуализация
Цветовая подсветка уровней
Разметка записей-запросов и ответов одинаковым tf_req_id для группировки их в цепочки
Поиск по нескольким полям (например, tf_resource_type=t1_compute_instance и диапазон timestamp) через отдельное представление или вкладку
Мгновенный полнотекстовый поиск по содержимому всех записей
Функция «пометить как прочитанное» для отмеченных записей, чтобы исключать их из общего списка аномалий

### Расширяемость
Плагинная система на базе gRPC: участники могут подключать собственные фильтры и обработчики (например, для автоматической агрегации ошибок по типу и повторяемости)
API для программной интеграции с внешними инструментами мониторинга и инцидент-менеджмента

### Анализ 
Генерация диаграммы Ганта или блок-схемы, отображающей хронологию запросов и ответов с учётом tf_req_id и зависимостей между ними. Граф строится на базе временных меток начала и конца обработки каждого запроса

## Критерии оценивания

### Импорт и парсинг логов (20 баллов)
Корректное выделение и маркировка секций terraform plan и terraform apply: 0-10 баллов
Распознавание timestamp и уровней логирования даже при их отсутствии в строках: 0-10 баллов

### Поиск, фильтрация  и визуализация (20 баллов)
Поиск по нескольким полям (например, tf_resource_type и диапазон timestamp) через интерфейс и группировка записей по tf_req_id и полнотекстового поиска по содержимому: 0-10 баллов
Интерактивное разворачивание и сворачивание JSON-блоков запросов/ответов кликом, удобство интерфейса: задачи (поиск ошибки, разворачивание JSON, переход по группам) решаются за минимум кликов, продемонстрировано в видео: 0-10 баллов

### Расширяемость и плагины (20 баллов)
Подключение и демонстрация работы хотя бы одного gRPC-плагина для фильтрации или обработки: 0-10 баллов
Показан вызов API (экспорт отфильтрованных логов или интеграция с внешним сервисом) через интерфейс или curl: 0-10 баллов

### Визуализация хронологии (20 баллов)
Генерация и визуализация диаграммы Ганта или блок-схемы хронологии запросов в интерфейсе: 0-20 баллов

### Презентация и проработка концепции (20 баллов)
Качество презентации и демонстрации решения: 0-10 баллов
Глубина проработки бизнес-логики и пользовательских сценариев: 0-10 баллов

--- 

### Дополнительные материалы и инструкции
- Примеры реальных Terraform-логов (plan/apply) различных провайдеров
- Документация по gRPC-плагинам для фильтрации и обработки записей
- Ссылка на логи: https://sigma.disk.t1.cloud/public/sUMtABJM

### Гайд по чек-поинтам
- Чек-поинт 1: демонстрация работы парсера и корректная маркировка plan/apply, timestamp и уровня логов
- Чек-поинт 2: выполнение поиска по полям и группировки по tf_req_id, показ интерактивного разворачивания JSON
- Чек-поинт 3: визуализация хронологии запросов в виде диаграммы или блок-схемы, представление расширяемости через gRPC-плагины

--- 

### Что сдается на проверку
- Ссылка на открытый репозиторий с полным исходным кодом решения. Должен включать инструкции для легкого запуска на любой ОС (рекомендуем Docker)
- Архитектурная схема компонентов: парсер, движок хранения, API, веб-клиент
- Демо-видео работы с импортом логов, поиском, группировкой и разворачиванием JSON
- Презентация с описанием технологии построения диаграммы Ганта/блок-схемы